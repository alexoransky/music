Project music
=============

The objective is to explore various music scales and intervals using
MIDI synthesizers and CLI or GUI visualizations.

Here is a list of Python tools for music:
https://wiki.python.org/moin/PythonInMusic

The project works with SimpleSynth or FluidSynth (preferred).
Both synths work with Sound Font SF2 intrsument sample files.
Polyphone tool can be used to edit files:
https://www.polyphone-soundfonts.com/download

Basically, the music theory part that is needed is described in wikipedia: 

https://en.wikipedia.org/wiki/Semitone#Minor_second
https://en.wikipedia.org/wiki/Just_intonation
https://en.wikipedia.org/wiki/Interval_(music)
https://en.wikipedia.org/wiki/Diatonic_scale
https://en.wikipedia.org/wiki/Scale_(music)
https://en.wikipedia.org/wiki/Minor_scale#Melodic_minor_scale
https://en.wikipedia.org/wiki/Chromatic_scale
https://en.wikipedia.org/wiki/Heptatonic_scale
https://en.wikipedia.org/wiki/MIDI
https://en.wikipedia.org/wiki/Scientific_pitch_notation
https://en.wikipedia.org/wiki/Chord_(music)

04/15/2020
----------
Project created
Added notes, diatonic intervals.

04/18/2020
----------
Added heptatonic scales, 12-TET.
The project will be using PyGame to play MIDI.
https://www.pygame.org/news
Installed SympleSynth to check MIDI output. The sound is not great. Need to install something better.

04/25/2020
----------
Will try FluidSynth with sound fonts:
https://sites.google.com/site/soundfonts4u/
FluidSynth will be CLI only, installed with homebrew.
homebrew install fluid-synth
It turns out that PyFluidSynth only supports FS 1.11.1, so this one has to be installed instead:
brew install https://raw.githubusercontent.com/Homebrew/homebrew-core/34dcd1ff65a56c3191fa57d3dd23e7fffd55fae8/Formula/fluid-synth.rb

The instruments will be NiceKeys B JN 1.4 (full keys with small piano).
Bunch of sound fonts are here:
https://sites.google.com/site/soundfonts4u/

Initialize fluidsynth with a small sound font to use the CLI.  This is not needed for python program.
fluidsynth -o midi.driver=coremidi -o audio.driver=coreaudio -o audio.coreaudio.device=default -o audio.period-size=256 /Users/alex/PycharmProject/music/data/Nice-Keys-B-Plus-JN1.4.sf2

We will be using PyFLuidSynth for a Python API wrapper.
https://github.com/nwhitehead/pyfluidsynth
It turns that it is for Python 2, so I patched it. Copy the patches/fluidsynthpath.py to where it is installed:
/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/fluidsynth.py

Install osascript
This is needed to control output volume in macOS. FS outputs some noise when the destructor is called.

FluidSynth settings is a great reference on how to control the synth.
http://www.fluidsynth.org/api/fluidsettings.xml#synth.gain

All that is incorporated with examples in the Synth class.

Added chords.

04/26/2020
----------
Explored Polyphone.  I really needed just a tool that would list presets in the SF2 file.
Updated chord print names.
Added Sus2 and Sus4 chords.

For GUI- installed Qt 5.12.8.  PySide2 seems to support only 5.12 as of now.

05/01/2020
----------
Added octave numbers to note names.
Reworked note names.
Added chord inversions.

05/02/2020
----------
Added .gitignore.

There is a project that draws a piano keyboard in the terminal:
https://github.com/s-d-m/pianoterm/blob/master/src/music_player.cc
Which is based on termbox library to draw anything in the terminal:
https://github.com/nsf/termbox

Interesting intro into WebMIDI:
https://www.smashingmagazine.com/2018/03/web-midi-api/

05/08/2020
----------
Arturia KeyStep 32 has arrived.  Works great with GarageBand.
FluidSynth requires a tool to bridge the controller's output MIDI port to its input port.
Found a MIDI router to map those:
https://github.com/icaroferre/MIDIRouter
Apparently it is Python Qt app, so it is great. Will be able to re-use parts.

Another MIDI route, called MIDI patchbay is not compatible with MacOS Catalina, is an Xcode project
and the has been in works for 6 months by now.

05/09/2020
----------
Added a MIDI router that uses mido lib to map the ports.
The router forwards MIDI messages from the designated input port to tbe designated output port.
It also queues all MIDI messages that are generated by the keyboard so that another thread
an access them.

05/10/2020
----------
Added a MIDI parser to print notes and chords that are being played.
